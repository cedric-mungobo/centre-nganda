import{T as V,r as c,a as u,c as m,b as o,u as l,w as f,F as C,Z as U,d as t,j as B,e as b,l as I,g as p,v as M,h as S,k as $,m as L,n as j}from"./app-C3zwqRo8.js";import{_ as z}from"./AuthenticatedLayout-Bz47mzm1.js";import{_ as r,a as x,b as i}from"./InputError-Bd7X7iCU.js";import{P as A}from"./PrimaryButton-CT-S8Fdu.js";import{_ as D}from"./PrimeEditor-ZfL7XfSM.js";/* empty css            */import"./ApplicationLogo-BbT1tmtY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex justify-between items-center"},P={class:"py-12"},T={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 text-gray-900"},E={class:"mt-1 flex items-center"},q={key:0,class:"relative inline-block h-32 w-32 overflow-hidden rounded-md"},H=["src"],O={key:1,class:"inline-block h-32 w-32 overflow-hidden rounded-md bg-gray-100"},Z={class:"flex space-x-6"},G={key:0},J={class:"flex items-end"},K={class:"flex h-6 items-center"},Q={class:"flex items-center justify-end mt-4"},re={__name:"Create",setup(W){const s=V({title:"",excerpt:"",content:"",featured_image:null,status:"draft",featured:!1,published_at:null}),n=c(null),g=c(null),v=c(null),h=d=>{const e=d.target.files[0];if(s.featured_image=e,e){const a=new FileReader;a.onload=k=>{n.value=k.target.result},a.readAsDataURL(e)}},w=()=>{s.featured_image=null,n.value=null,g.value&&(g.value.value="")},_=()=>{s.post(route("admin.posts.store"),{onSuccess:()=>{s.reset(),n.value=null}})},y=()=>{if(s.status==="published"&&!s.published_at){const d=new Date;s.published_at=d.toISOString().slice(0,16)}};return(d,e)=>(u(),m(C,null,[o(l(U),{title:"Créer un article"}),o(z,null,{header:f(()=>[t("div",N,[e[8]||(e[8]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Créer un article",-1)),o(l(B),{href:d.route("admin.posts.index"),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors"},{default:f(()=>e[7]||(e[7]=[b(" Retour à la liste ")])),_:1},8,["href"])])]),default:f(()=>[t("div",P,[t("div",T,[t("div",F,[t("div",R,[t("form",{onSubmit:I(_,["prevent"]),class:"space-y-6"},[t("div",null,[o(r,{for:"title",value:"Titre"}),o(x,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:l(s).title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).title=a),required:"",autofocus:""},null,8,["modelValue"]),o(i,{class:"mt-2",message:l(s).errors.title},null,8,["message"])]),t("div",null,[o(r,{for:"excerpt",value:"Extrait (optionnel)"}),p(t("textarea",{id:"excerpt",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":e[1]||(e[1]=a=>l(s).excerpt=a),rows:"3"},null,512),[[M,l(s).excerpt]]),o(i,{class:"mt-2",message:l(s).errors.excerpt},null,8,["message"])]),t("div",null,[o(r,{for:"content",value:"Contenu"}),o(D,{modelValue:l(s).content,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).content=a),class:"mt-1"},null,8,["modelValue"]),o(i,{class:"mt-2",message:l(s).errors.content},null,8,["message"])]),t("div",null,[o(r,{for:"featured_image",value:"Image à la une (optionnel)"}),t("div",E,[n.value?(u(),m("span",q,[t("img",{src:n.value,class:"h-full w-full object-cover"},null,8,H),t("button",{type:"button",onClick:w,class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 shadow-sm"},e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):(u(),m("span",O,e[10]||(e[10]=[t("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})],-1)]))),t("button",{type:"button",class:"ml-5 rounded-md border border-gray-300 bg-white py-2 px-3 text-sm font-medium leading-4 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:e[3]||(e[3]=a=>v.value.value.click())}," Changer "),t("input",{ref_key:"fileInput",ref:v,type:"file",class:"hidden",onChange:h,accept:"image/*"},null,544)]),o(i,{class:"mt-2",message:l(s).errors.featured_image},null,8,["message"])]),t("div",Z,[t("div",null,[o(r,{for:"status",value:"Statut"}),p(t("select",{id:"status","onUpdate:modelValue":e[4]||(e[4]=a=>l(s).status=a),onChange:y,class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},e[11]||(e[11]=[t("option",{value:"draft"},"Brouillon",-1),t("option",{value:"published"},"Publié",-1)]),544),[[S,l(s).status]]),o(i,{class:"mt-2",message:l(s).errors.status},null,8,["message"])]),l(s).status==="published"?(u(),m("div",G,[o(r,{for:"published_at",value:"Date de publication"}),o(x,{id:"published_at",type:"datetime-local",class:"mt-1 block w-full",modelValue:l(s).published_at,"onUpdate:modelValue":e[5]||(e[5]=a=>l(s).published_at=a)},null,8,["modelValue"]),o(i,{class:"mt-2",message:l(s).errors.published_at},null,8,["message"])])):$("",!0),t("div",J,[t("div",K,[p(t("input",{id:"featured",type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>l(s).featured=a),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[L,l(s).featured]])]),e[12]||(e[12]=t("div",{class:"ml-3 text-sm"},[t("label",{for:"featured",class:"font-medium text-gray-700"},"Article à la une")],-1))])]),t("div",Q,[o(A,{class:j(["ml-4",{"opacity-25":l(s).processing}]),disabled:l(s).processing},{default:f(()=>e[13]||(e[13]=[b(" Créer l'article ")])),_:1},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{re as default};
